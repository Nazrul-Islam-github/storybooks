const html = `<p> </p><div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color:#569cd6">const</span>&nbsp;<span style="color:#dcdcaa">moment</span>&nbsp;=&nbsp;<span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'moment'</span>)</div> <div><span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span>&nbsp;=&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;formatDate&nbsp;function&nbsp;for&nbsp;formating&nbsp;date&nbsp;on&nbsp;our&nbsp;hbs&nbsp;template*/</span></div> <div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">formatDate</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">date</span>,&nbsp;<span style="color:#9cdcfe">format</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#dcdcaa">moment</span>(<span style="color:#9cdcfe">date</span>).<span style="color:#dcdcaa">format</span>(<span style="color:#9cdcfe">format</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div> <div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;fuction&nbsp;for&nbsp;short&nbsp;stories&nbsp;show&nbsp;on&nbsp;localhost:3000/stories</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">truncate</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">str</span>,&nbsp;<span style="color:#9cdcfe">len</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">if</span>&nbsp;(<span style="color:#9cdcfe">str</span>.<span style="color:#9cdcfe">length</span>&nbsp;&gt;&nbsp;<span style="color:#9cdcfe">len</span>&nbsp;&amp;&amp;&nbsp;<span style="color:#9cdcfe">str</span>.<span style="color:#9cdcfe">length</span>&nbsp;&gt;&nbsp;<span style="color:#b5cea8">0</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6">let</span>&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;=&nbsp;<span style="color:#9cdcfe">str</span>&nbsp;+&nbsp;<span style="color:#ce9178">'&nbsp;'</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;=&nbsp;<span style="color:#9cdcfe">str</span>.<span style="color:#dcdcaa">substr</span>(<span style="color:#b5cea8">0</span>,&nbsp;<span style="color:#9cdcfe">len</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;=&nbsp;<span style="color:#9cdcfe">str</span>.<span style="color:#dcdcaa">substr</span>(<span style="color:#b5cea8">0</span>,&nbsp;<span style="color:#9cdcfe">new_str</span>.<span style="color:#dcdcaa">lastIndexOf</span>(<span style="color:#ce9178">'&nbsp;'</span>))</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;=&nbsp;<span style="color:#9cdcfe">new_str</span>.<span style="color:#4fc1ff">length</span>&nbsp;&gt;&nbsp;<span style="color:#b5cea8">0</span>&nbsp;?&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;:&nbsp;<span style="color:#9cdcfe">str</span>.<span style="color:#dcdcaa">substr</span>(<span style="color:#b5cea8">0</span>,&nbsp;<span style="color:#9cdcfe">len</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#9cdcfe">new_str</span>&nbsp;+&nbsp;<span style="color:#ce9178">'...'</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#9cdcfe">str</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;function&nbsp;for&nbsp;strip&nbsp;html&nbsp;tag&nbsp;when&nbsp;get&nbsp;story&nbsp;body&nbsp;from&nbsp;database*/</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">stripTags</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">input</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#9cdcfe">input</span>.<span style="color:#dcdcaa">replace</span>(<span style="color:#d16969">/&lt;</span><span style="color:#ce9178">(?:</span><span style="color:#d16969">.</span><span style="color:#dcdcaa">|</span><span style="color:#d16969">\n</span><span style="color:#ce9178">)</span><span style="color:#d7ba7d">*?</span><span style="color:#d16969">&gt;/</span><span style="color:#569cd6">gm</span>,&nbsp;<span style="color:#ce9178">''</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;Edit&nbsp;icon&nbsp;helper&nbsp;&nbsp;</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">editIcon</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">storyUser</span>,&nbsp;<span style="color:#9cdcfe">loggedUser</span>,&nbsp;<span style="color:#9cdcfe">storyId</span>,&nbsp;<span style="color:#9cdcfe">floating</span>&nbsp;=&nbsp;<span style="color:#569cd6">true</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">if</span>&nbsp;(<span style="color:#9cdcfe">storyUser</span>.<span style="color:#9cdcfe">_id</span>.<span style="color:#dcdcaa">toString</span>()&nbsp;==&nbsp;<span style="color:#9cdcfe">loggedUser</span>.<span style="color:#9cdcfe">_id</span>.<span style="color:#dcdcaa">toString</span>())&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">if</span>&nbsp;(<span style="color:#9cdcfe">floating</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">` & lt; a & nbsp; href = "/stories/edit/</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">storyId</span><span style="color:#569cd6">}</span><span style="color:#ce9178">" & nbsp; class="btn-floating&nbsp;halfway-fab&nbsp;blue" & gt;& lt; i & nbsp; class="fas&nbsp;fa-edit&nbsp;fa-small" & gt;& lt; /i&gt;&lt;/a & gt; `</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#c586c0">else</span>&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">` & lt; a & nbsp; href = "/stories/edit/</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">storyId</span><span style="color:#569cd6">}</span><span style="color:#ce9178">" & gt;& lt; i & nbsp; class="fas&nbsp;fa-edit" & gt;& lt; /i&gt;&lt;/a & gt; `</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#c586c0">else</span>&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div> <div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;database&nbsp;status&nbsp;value</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;and&nbsp;select&nbsp;story&nbsp;status&nbsp;when&nbsp;story&nbsp;is&nbsp;editing&nbsp;</span></div><div><span style="color:#6a9955">&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">select</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">selected</span>,&nbsp;<span style="color:#9cdcfe">options</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#9cdcfe">options</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color:#dcdcaa">fn</span>(<span style="color:#569cd6">this</span>)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color:#dcdcaa">replace</span>(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6">new</span>&nbsp;<span style="color:#4ec9b0">RegExp</span>(<span style="color:#ce9178">'&nbsp;value="'</span>&nbsp;+&nbsp;<span style="color:#9cdcfe">selected</span>&nbsp;+&nbsp;<span style="color:#ce9178">'"'</span>),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ce9178">'$&amp;&nbsp;selected="selected"'</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color:#dcdcaa">replace</span>(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6">new</span>&nbsp;<span style="color:#4ec9b0">RegExp</span>(<span style="color:#ce9178">'&gt;'</span>&nbsp;+&nbsp;<span style="color:#9cdcfe">selected</span>&nbsp;+&nbsp;<span style="color:#ce9178">'&lt;/option&gt;'</span>),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ce9178">'&nbsp;selected="selected"$&amp;'</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div><br /><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#dcdcaa">deleteIcon</span><span style="color:#9cdcfe">:</span>&nbsp;<span style="color:#569cd6">function</span>&nbsp;(<span style="color:#9cdcfe">storyUser</span>,&nbsp;<span style="color:#9cdcfe">loggedUser</span>,&nbsp;<span style="color:#9cdcfe">storyId</span>,&nbsp;<span style="color:#9cdcfe">floating</span>&nbsp;=&nbsp;<span style="color:#569cd6">true</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">if</span>&nbsp;(<span style="color:#9cdcfe">storyUser</span>.<span style="color:#9cdcfe">_id</span>.<span style="color:#dcdcaa">toString</span>()&nbsp;==&nbsp;<span style="color:#9cdcfe">loggedUser</span>.<span style="color:#9cdcfe">_id</span>.<span style="color:#dcdcaa">toString</span>())&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">if</span>&nbsp;(<span style="color:#9cdcfe">floating</span>)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">` & lt; a & nbsp; href = "/stories/</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">storyId</span><span style="color:#569cd6">}</span><span style="color:#ce9178">" & nbsp; class="btn-floating&nbsp;halfway-fab&nbsp;blue" & gt;& lt; i & nbsp; class="fas&nbsp;fa-trash" & gt;& lt; /i&gt;&lt;/a & gt; `</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#c586c0">else</span>&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">` & lt; a & nbsp; href = "/stories/</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">storyId</span><span style="color:#569cd6">}</span><span style="color:#ce9178">" & gt;& lt; i & nbsp; class="fas&nbsp;fa-trash" & gt;& lt; /i&gt;&lt;/a & gt; `</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#c586c0">else</span>&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c586c0">return</span>&nbsp;<span style="color:#ce9178">''</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;},</div><div>}</div></div>`

const hbsHelperFunction = {
    stripTags: function (input) {
        return input.replace(/<(?:.|\n)*?>/gm, '')
    },
}

console.log(hbsHelperFunction.stripTags(html));